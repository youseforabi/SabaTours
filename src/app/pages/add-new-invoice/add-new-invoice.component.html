<div class="invoice-container">
  <h1>Invoice Information</h1>

  <form [formGroup]="invoiceForm" (ngSubmit)="onSubmit()">
    <div class="form-grid">

      <!-- Username -->
      <div class="form-group">
        <label>Username *</label>
        <select formControlName="username">
          <option value="">Select user...</option>
          <option *ngFor="let user of users" [value]="user.userID">{{ user.name }}</option>
        </select>
      </div>

      <!-- Invoice Number -->
      <div class="form-group">
        <label>Invoice Number *</label>
        <input type="text" formControlName="invoiceNumber" placeholder="Type Invoice...">
      </div>

      <!-- Email Address -->
      <div class="form-group">
        <label>Email Address</label>
        <input type="email" formControlName="userEmail" placeholder="Type email address...">
      </div>

      <!-- Total Amount -->
      <div class="form-group">
        <label>Total Amount *</label>
        <input type="text" formControlName="totalAmount" placeholder="Total Amount...">
        <div *ngIf="invoiceForm.get('totalAmount')?.errors && invoiceForm.get('totalAmount')?.touched" class="error">
          <div *ngIf="invoiceForm.get('totalAmount')?.errors?.['required']">Total amount is required.</div>
          <div *ngIf="invoiceForm.get('totalAmount')?.errors?.['pattern']">Enter a valid number.</div>
          <div *ngIf="invoiceForm.get('totalAmount')?.errors?.['min']">Amount must be greater than 0.</div>
        </div>
      </div>

      <!-- Tour Name -->
      <div class="form-group">
        <label>Tour Name</label>
        <select formControlName="tourName">
          <option value="">Select tour item...</option>
          <option value="tour1">Tour 1</option>
          <option value="tour2">Tour 2</option>
        </select>
      </div>

      <!-- Issue Date -->
      <div class="form-group">
        <label>Issue Date *</label>
        <input type="date" formControlName="issueDate">
        <div *ngIf="invoiceForm.get('issueDate')?.errors?.['beforeToday'] && invoiceForm.get('issueDate')?.touched" class="error">
          Issue date cannot be before today.
        </div>
      </div>

      <!-- Due Date -->
      <div class="form-group">
        <label>Due Date *</label>
        <input type="date" formControlName="dueDate">
        <div *ngIf="invoiceForm.get('dueDate')?.errors?.['dueBeforeIssue'] && invoiceForm.get('dueDate')?.touched" class="error">
          Due date must be after issue date.
        </div>
      </div>

      <!-- Description -->
      <div class="form-group description">
        <label>Description</label>
        <textarea formControlName="description" placeholder="Description..."></textarea>
      </div>

      <!-- Guests Capability (adults, children, infants) -->
      <div class="form-group guests" style="grid-column: span 2;">
        <label>Guests Capability</label>
        <div class="guest-inputs">
          <div>
            <label>Adult</label>
            <input type="number" formControlName="adults" placeholder="Ad">
            <div *ngIf="invoiceForm.get('adults')?.errors && invoiceForm.get('adults')?.touched" class="error">
              <div *ngIf="invoiceForm.get('adults')?.errors?.['required']">Required</div>
              <div *ngIf="invoiceForm.get('adults')?.errors?.['pattern']">Only positive numbers allowed</div>
            </div>
          </div>
          <div>
            <label>Children</label>
            <input type="number" formControlName="children" placeholder="Ch">
            <div *ngIf="invoiceForm.get('children')?.errors && invoiceForm.get('children')?.touched" class="error">
              <div *ngIf="invoiceForm.get('children')?.errors?.['required']">Required</div>
              <div *ngIf="invoiceForm.get('children')?.errors?.['pattern']">Only positive numbers allowed</div>
            </div>
          </div>
          <div>
            <label>Infant</label>
            <input type="number" formControlName="infants" placeholder="In">
            <div *ngIf="invoiceForm.get('infants')?.errors && invoiceForm.get('infants')?.touched" class="error">
              <div *ngIf="invoiceForm.get('infants')?.errors?.['required']">Required</div>
              <div *ngIf="invoiceForm.get('infants')?.errors?.['pattern']">Only positive numbers allowed</div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="buttons">
      <button type="submit">Create</button>
      <button type="button" class="cancel">Cancel</button>
    </div>
  </form>
</div>
