<form [formGroup]="bookingForm" (ngSubmit)="submitBooking()">
    <div class="container booking-container">
      <div class="row">
        <!-- Booking Information -->
        <div class="col-md-7">
          <h4>Booking Information</h4>
  
          <div class="row">

            <div class="form-group">
                <label>Traveler Name</label>
                <input type="text" class="form-control" formControlName="travelerName" placeholder="Type username..." />
                <div *ngIf="bookingForm.get('travelerName')?.errors?.['required'] && bookingForm.get('travelerName')?.touched" class="text-danger">
                  Traveler name is required.
                </div>
                <div *ngIf="bookingForm.get('travelerName')?.errors?.['minlength'] && bookingForm.get('travelerName')?.touched" class="text-danger">
                  Traveler name must be at least 3 characters.
                </div>
              </div>
      
              <div class="form-group">
                <label>Tour Name</label>
                <select class="form-control" formControlName="tourName">
                  <option value="">Select tour item...</option>
                  <option value="tour1">Tour 1</option>
                  <option value="tour2">Tour 2</option>
                </select>
                <div *ngIf="bookingForm.get('tourName')?.invalid && bookingForm.get('tourName')?.touched" class="text-danger">
                  Please select a tour.
                </div>
              </div>
              
            <div class="col-md-4">
              <div class="form-group">
                <label>Tour Price</label>
                <input type="number" class="form-control" formControlName="tourPrice" placeholder="Tour Price" />
                <div *ngIf="bookingForm.get('tourPrice')?.errors?.['required'] && bookingForm.get('tourPrice')?.touched" class="text-danger">
                    Tour price is required.
                  </div>
                  <div *ngIf="bookingForm.get('tourPrice')?.errors?.['min'] && bookingForm.get('tourPrice')?.touched" class="text-danger">
                    Tour price must be greater than 0.
                  </div>
        
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label>Guest Capability</label>
                <input type="number" class="form-control" formControlName="guestCapability" placeholder="Guest Capability" />
                <div *ngIf="bookingForm.get('guestCapability')?.errors?.['required'] && bookingForm.get('guestCapability')?.touched" class="text-danger">
                        Guest Capability is required.
                  </div>
              </div>
            </div>
          </div>
  
          <!-- Guests Section -->
          <h5>Guests</h5>
          <div formGroupName="guests">
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label>Adults</label>
                  <input type="number" class="form-control" formControlName="adults" placeholder="Adults" />
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label>Children</label>
                  <input type="number" class="form-control" formControlName="children" placeholder="Children" />
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label>Infants</label>
                  <input type="number" class="form-control" formControlName="infants" placeholder="Infants" />
                </div>
              </div>
            </div>
          </div>
  
          <!-- Price Per Guest Type -->
          <h5>Price Per Guest Type</h5>
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label>Adult Price</label>
                <input type="number" class="form-control" formControlName="adultPrice" placeholder="Adult Price" />
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label>Child Price</label>
                <input type="number" class="form-control" formControlName="childPrice" placeholder="Child Price" />
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label>Infant Price</label>
                <input type="number" class="form-control" formControlName="infantPrice" placeholder="Infant Price" />
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label>Booking Date</label>
            <input type="date" class="form-control" formControlName="bookingDate" />
            <div *ngIf="bookingForm.get('bookingDate')?.invalid && bookingForm.get('bookingDate')?.touched" class="text-danger">
                Booking date is required.
              </div>
          </div>
  
          <div class="form-group">
            <label>Email address</label>
            <input type="email" class="form-control" formControlName="email" placeholder="Type email address" />
            <div *ngIf="bookingForm.get('email')?.invalid && bookingForm.get('email')?.touched" class="text-danger">
                Please enter a valid email address.
              </div>
          </div>
  
          <div class="form-group">
            <label>Phone number</label>
            <input type="tel" class="form-control" formControlName="phone" placeholder="Phone number" />
            <div *ngIf="bookingForm.get('phone')?.invalid && bookingForm.get('phone')?.touched" class="text-danger">
                Please enter a valid phone number.
              </div>
          </div>
        </div>
  
        <!-- Order Summary -->
        <div class="col-md-5">
          <h4>Order Summary</h4>
          <h5>Payment Gateway</h5>
          <select class="form-control" formControlName="paymentGateway">
            <option value="">Select gateway...</option>
            <option value="visa">Visa/MasterCard</option>
          </select>
  
          <!-- Card Details (Only If Visa Selected) -->
          <div *ngIf="bookingForm.get('paymentGateway')?.value === 'visa'" formGroupName="cardDetails">
            <h5>Card Details</h5>
            <div class="form-group">
                <label>Card Number</label>
                <input 
                  type="text" 
                  class="form-control" 
                  formControlName="cardNumber" 
                  placeholder="1234 5678 9012 3456"
                  (input)="formatCardNumber($event)" />
                
                <div *ngIf="bookingForm.get('cardDetails.cardNumber')?.invalid && bookingForm.get('cardDetails.cardNumber')?.touched" class="text-danger">
                  Card number must be 16 digits, formatted as XXXX XXXX XXXX XXXX.
                </div>
              </div>
  
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label>Expiry Month</label>
                  <input type="text" class="form-control" formControlName="expiryMonth" placeholder="MM" />
                  <div *ngIf="bookingForm.get('cardDetails.expiryMonth')?.invalid && bookingForm.get('cardDetails.expiryMonth')?.touched" class="text-danger">
                    Enter a valid month (01-12).
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label>Expiry Year</label>
                  <input type="text" class="form-control" formControlName="expiryYear" placeholder="YYYY" />
                  <div *ngIf="bookingForm.get('cardDetails.expiryYear')?.invalid && bookingForm.get('cardDetails.expiryYear')?.touched" class="text-danger">
                    Enter a valid year (e.g., 2025).
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label>CVC</label>
                  <input type="text" class="form-control" formControlName="cvc" placeholder="CVC" />
                  <div *ngIf="bookingForm.get('cardDetails.cvc')?.invalid && bookingForm.get('cardDetails.cvc')?.touched" class="text-danger">
                    Enter a valid CVC (3-4 digits).
                  </div>
                </div>
              </div>
            </div>
          </div>
  
          <button class="btn btn-primary" type="submit" [disabled]="bookingForm.invalid">Complete Order</button>
        </div>
      </div>
    </div>
  </form>
  